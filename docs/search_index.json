[["index.html", "Rrepo repo 1 defabc", " Rrepo defabc 2022-03-11 repo 1 defabc R을 사용하며 발생한 여러 문제에 대한 해결방법과 주요 팁에 대해 작성하였다. 자료는 웹상의 여러 자료를 종합한 것이며, 출처에 대해서는 최대한 표기하였다. 작성된 내용 중 오류가 있을 수 있다. bookdowm render chapter별 이름의 공란은 ’-’로 표시 install.packages(&quot;bookdown&quot;) bookdown::render_book(&quot;index.Rmd&quot;) browseURL(&quot;docs/index.html&quot;) bookdown에 대한 참고문헌 서울시립대학교 통계학과 이용희 Bookdown 패키지를 사용한 한글책 제작의 기초 Yihui Xie bookdown: Authoring Books and Technical Documents with R Markdown 아래 패키지를 이용하였음 library(bookdown) library(knitr) library(tidyverse) library(showtext) chunk에 대해 아래와 같이 설정하였음 eval=F - 코드를 실행하지 않는다. echo=F - 코드를 보여주지 않는다. include=F - 실행 결과를 보여주지 않는다. message=F - 실행 때 나오는 메세지를 보여주지 않는다. warning=F - 실행 때 나오는 경고를 보여주지 않는다. error=T - 에러가 있어도 실행하고 에러코드를 보여준다. fig.height = 7 - 그림 높이, R로 그린 그림에만 해당한다. fig.width = 7 - 그림 너비, R로 그린 그림에만 해당한다. fig.align = ‘center’ - 그림 위치, R로 그린 그림에만 해당한다. knitr::opts_chunk$set(warning = F, message = F) "],["setting.html", "repo 2 setting 2.1 window", " repo 2 setting 2.1 window 2.1.1 설치해야할 프로그램 R Rstudio git Zotero miniconda 2.1.2 Rtools설치 window에서 R사용시 rtools4가 필요 Rtools 2.1.3 window 영어 설정 슬기로운통계생활 - 유투브 설정-언어 windows display language: English preferred languages English - Korean Administrative language settings - Language for non-Unicode programs = Korean Regional Format = Korean 2.1.4 locale encoding의 이해 Locale(로케일): OS별 국가마다 제공하는 여러 표현방식 LC_COLLATE(문자정렬), LC_CTYPE(문자처리), LC_MESSAGES(언어/문화 등) locale 관련 함수 Sys.getlocale(): 현재 설정된 로케일을 확인 Sys.setlocale(category=‘LC_ALL’, locale=‘locale name’): 로케일 설정을 변경 category 인자에는 ‘LC_COLLATE’, ‘LC_CTYPE’, ‘LC_MONETARY’, ‘LC_TIME’ 등 개별 카테고리를 지정할 수 있으나 편의상 이 모든걸 통틀은 ’LC_ALL’을 사용하여 지정 locale 인자에 지정할 locale name은 운영체제에 따라 서로 다름 Sys.setlocale() 함수 안에 아무런 인자를 넣지 않으면 운영체제의 default로 설정 localeToCharset(): 현재 설정된 한글 인코딩 방식을 확인 예시시 문자열 깨질 때 로케일 설정 - 윈도우 Sys.getlocale() localeToCharset() 미국 로케일로 로케일을 변환하기 Sys.setlocale(category = &#39;LC_ALL&#39;,locale = &#39;english&#39;) localeToCharset() 우리나라로 로케일 변경하기 Sys.setlocale(category = &#39;LC_ALL&#39;,locale=&#39;korean&#39;) localeToCharset() 2.1.5 miniconda 설치 및 가상환경 생성 슬기로운통계생활 - 유투브 google: git and install miniconda 검색 설치과정에 ‘Select the first option for “Add Anaconda to my PATH environment variable” and also leave the selection on “Register Anaconda as my default Python 3.7”. Click on “Install”.’ 체크 cmd: conda conda --version conda update --all 가상환경 conda env list conda create -n &#39;nm&#39; conda create -n &#39;nm&#39; python=3.6 codna env remove -n &#39;nm&#39; conda list conda activate &#39;nm&#39; conda deactivate conda install &#39;package_nm&#39; 2.1.6 R에서 Python 사용하기 슬기로운통계생활 - 유투브 reticulate package 설치 install.packages(&#39;reticulate&#39;) miniconda에 설치된 가상환경 연결 및 확인 reticulate::use_condaenv(&quot;url&quot;) reticulate::py_config() reticulate::py_discover_config() 가상환경 주소 확인 cmd 내 가상환경 activate conda list package가 설치된 환경 주소 나옴 2.1.7 git 연결 오류(port 22) 윈도우에서 git 설정한 후 Rstudio와 연결시 오류 발생 ssh: connect to host github.com port 22: Operation timed out fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists. 이유는 방화벽이나 ISP가 설정한 방화벽이 port22에서 ssh연결을 차단하는 경우 출처 해결방법은 ~/ssh/config에 아래 내용을 추가 Host github.com Hostname ssh.github.com Port 443 이때, config파일이 없을 경우 만들어야함 파워쉘이나 CMD에서 vim 명령어는 먹히지 않음 Git Bash를 실행해 config 생성 출처 마우스 오른쪽 클릭 Git Bash Here 디렉토리 생성(mkdir) mkdir ~/.ssh config 파일 생성 vim ~/.ssh/config config 아래 호스트 정보 등록 i를 눌러 입력하고 esc :wq 명령어로 저장 및 종료 2.1.8 rmarkdown - pdf 및 한글사용을 위한 설정 tinytex 설치 슬기로운통계생활 - 유투브 install.packages(&quot;tinytex&quot;) tinytex::install_tinytex() 아래 순서와 같이 진행 use_tinytex()를 실행 한 후 tlmgr파일이 있는 tinytex 폴더로 경로 설정 tlmgr의 위치: User/name/AppData/Roaming/ (tlmgr 한번 실행할 것) tinytex::use_tinytex() tinytex::tinytex_root() yml에 다음 내용 추가 output: pdf_document header-includes: - \\usepacakge{kotex} KTUG한글TEX사용자그룹-내려받기-Microsoft Windows용 설치방법 TeXLive windows에 설치하기의 4. ko.TeXLive 설정 아래 내용 cmd에서 실행 &gt; tlmgr repository add https://cran.asia/KTUG/texlive/tlnet ktug &gt; tlmgr pinning add ktug * &gt; tlmgr install ktugbin &gt; tlmgr install texworks-config &gt; tlmgr install nanumttf hcr-lvt 2.1.9 Visual Studio code 테마 설정 설치방법 슬기로운통계생활 - 유투브 google: rstudio vscode theme rscodeio install.packages(&quot;remotes&quot;) remotes::install_github(&quot;anthonynorth/rscodeio&quot;) rscodeio::install_theme() 2.1.10 네이버 - D2=Coding D2 coding 글꼴 2.1.11 font 설정 extrafont의 여러 문제로 showtext pacakge로 변경 참고자료 showtext: Using Fonts More Easily in R Graphs 너의 폰트를 써라! (R에서도) TTF(일반문서에 적합) 뿐만 아니라 OTF(그래픽 디자인 출력에 적합)도 설치 가능 단점: Rstudio 실행마다 폰트 설치를 실행해야함 KoPub 서체 설치 fonts 위치 C:/Windows/fonts font_paths(): 폰트가 설치된 경로 font_files(): 윈도우에 설치된 폰트의 path, file, family, face, version, ps_name에 대한 파일 데이터 font_add: 폰트 설치(family 내 bold, italic, bolditalic, symbol 설정 가능) font_add(family = &quot;Arial&quot;, regular = &quot;C:/Windows/Fonts/arial.ttf&quot;, bold = &quot;C:/Windows/Fonts/arialbd.ttf&quot;, italic = &quot;C:/Windows/Fonts/ariali.ttf&quot;, bolditalic = &quot;C:/Windows/Fonts/arialbi.ttf&quot;, symbol = NULL) font_add(family = &quot;KoPubDotumL&quot;, regular = &quot;C:/Windows/Fonts/KoPubWorld Dotum_Pro Light.otf&quot;) font_add(family = &quot;KoPubDotumM&quot;, regular = &quot;C:/Windows/Fonts/KoPubWorld Dotum_Pro Medium.otf&quot;) font_add(family = &quot;KoPubDotumB&quot;, regular = &quot;C:/Windows/Fonts/KoPubWorld Dotum_Pro Bold.otf&quot;) showtext_auto(): turn on/off the automatic use of showtext functionality font_families(): 설치된 폰트확인 font_families() ## [1] &quot;sans&quot; &quot;serif&quot; &quot;mono&quot; ## [4] &quot;wqy-microhei&quot; &quot;Arial&quot; &quot;KoPubDotumL&quot; ## [7] &quot;KoPubDotumM&quot; &quot;KoPubDotumB&quot; showtext.auto() ggplot(NULL, aes(x = 1, y = 1)) + ylim(0.8, 1.3) + annotate(&quot;text&quot;, 1, 1.2, family = &#39;Arial&#39;, size = 15, fontface = &#39;italic&#39;, label = &#39;Arial italic&#39;) + annotate(&quot;text&quot;, 1, 1.1,family = &#39;KoPubDotumL&#39;, size = 15, label = &quot;KoPubWorldDotum_Pro Light&quot;) + annotate(&quot;text&quot;, 1, 1, family = &#39;KoPubWorldDotum_Pro Medium&#39;, size = 15, label = &quot;KoPub Dotum M&quot;) + annotate(&quot;text&quot;, 1, 0.9, family = &#39;KoPubDotumB&#39;, size = 15, label = &quot;KoPubWorldDotum_Pro Bold&quot;) + theme_void() 2.1.12 font에 대한 snippet 설정 슬기로운 통계생활 - 유투브 Options-code-Editing에서 Snippets 설정 edit snippets snippet 아래 코드는 항상 tab을 누르고 사용 ${1:‘nm’}은 snippet입력 후 곧바로 입력되는 위치를 의미하며, tab과 shift+tab을 이용해 이동 가능 snippet kfonts library(showtext) font_add(family = &quot;KoPubDotumL&quot;, regular = &quot;C:/Windows/Fonts/KoPubWorld Dotum_Pro Light.otf&quot;) font_families() showtext_auto() snippet libset lib &lt;- c(${1:&quot;lib1&quot;},${2:&quot;lib2&quot;},${3:&quot;lib3&quot;}) lapply(lib, library, character.only = T) rm(lib) 코드창에서는 snippet이 잘 되지만 markdown에서는 잘 안됨 Tools-Modify Keyboard Shortcuts…-snippet 검색 - insert snippet에 대한 shortcut을 ’shift+Space’로 설정 2.1.13 사용하기 좋은 package datapasta Excel에서 바로 붙여넣을 수 있음(tibble, vector,…) addins "],["r-tips.html", "repo 3 R tips 3.1 Affinity Designer for SVGLITE", " repo 3 R tips 3.1 Affinity Designer for SVGLITE Affiinity Designer 사용을 위한 svglite package의 code 수정방법에 대해 알아본다. Affiinity Designer는 Adobe사의 Illustrator와 같은 벡터드로잉프로그램이다. Serif는 Affiinity 프로그램에 대해 1회 구매시 특정 버전 이하에 대해서는 기간에 관계 없이 이용할 수 있도록 하여 Adobe 제품과 비교해 더 경제적인 장점이 있다. 필자는 R에서 ggplot2를 이용해 작성된 그래프를 수정하기 위해 이 프로그램을 사용하고 있다. ggplot2에서는 svg 등 벡터 이미지파일을 내보내기 위해 svglite package를 사용한다. 그러나 Affiinity Designer는 svglite로 내보내진 벡터이미지파일을 정확하게 읽지 못한다. Angelo Limeta는 이 문제의 원인을 기술하고, 해결하는 방법을 제안했다. 그러나 Angelo Limeta는 svglite 1.2.2에 한정해 문제를 해결해, 2021년 기준 2.0.0버전인 svglite에서는 문제를 해결할 수 없다. 이 페이지에서는 최신 버전의 svglite에서 어떻게 문제를 해결하는지 기술한다. 3.1.1 code 수정 svglite는 multiple CSS style과 CDATA sections 다루지 못한다. ggplot2는 svglite의 svglite함수를 이용하는데, 이 함수는 C++로 구성된 ‘devSVG.cpp’를 이용한다. 따라서 ’devSVG.cpp’ 내 code를 일부 코드를 수정해 문제를 해결한다. CRAN에 등록된 svglite 가운데 package sources ’svglite 2.0.0.tar.gz’를 다운받고, 압축을 해제하면, src파일에 ’devSVG.cpp’파일이 있다. windows binaries 또는 mac os binaries를 통해 설치된 파일에서는 code를 수정 할 수 없다. 아래 a의 //Setting default styles의 code를, b의 //Setting default styles로 바꾼후 저장한다. 이때, devSVG.cpp 파일은 메모장을 이용해 읽을 수 있다. a code ... // Setting default styles (*stream) &lt;&lt; &quot;&lt;defs&gt;\\n&quot;; (*stream) &lt;&lt; &quot; &lt;style type=&#39;text/css&#39;&gt;&lt;![CDATA[\\n&quot;; (*stream) &lt;&lt; &quot; line, polyline, path, rect, circle {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; ]]&gt;&lt;/style&gt;\\n&quot;; (*stream) &lt;&lt; &quot;&lt;/defs&gt;\\n&quot;; ... (*stream) &lt;&lt; &quot;&lt;rect width=&#39;100%&#39; height=&#39;100%&#39;&quot;; b code ... // Setting default styles (*stream) &lt;&lt; &quot;&lt;defs&gt;\\n&quot;; (*stream) &lt;&lt; &quot; &lt;style&gt;\\n&quot;; (*stream) &lt;&lt; &quot; line {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; polyline {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; path {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; rect {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; circle {\\n&quot;; (*stream) &lt;&lt; &quot; fill: none;\\n&quot;; (*stream) &lt;&lt; &quot; stroke: #000000;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linecap: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-linejoin: round;\\n&quot;; (*stream) &lt;&lt; &quot; stroke-miterlimit: 10.00;\\n&quot;; (*stream) &lt;&lt; &quot; }\\n&quot;; (*stream) &lt;&lt; &quot; &lt;/style&gt;\\n&quot;; (*stream) &lt;&lt; &quot;&lt;/defs&gt;\\n&quot;; ... 3.1.2 발생문제 (window) tar.gz 파일로 압축하는 방법 반디집을 사용하였다. 먼저 반디집 내 새로압축 기능 가운데 압축형식을 tar로 설정하고 압축한다. 그 다음 tar로 압축된 파일을 다시 압충형식 gz로 설정하고 압축한다. 두 단계를 거쳐, tar.gz 파일로 압축 할 수 있다. (window) 수동 설치가 되지 않는 문제 tar.gz파일로 된 패키지가 R에서 수동으로 설치되지 않는 문제가 있다. 관련 내용은 블로그 를 참고하였다. 설치가 되지 않는 원인은 CRAN 내 ripa package가 내려갔기 때문이다. ripa는 CRAN 내 아카이브에서 설치 할 수 있다. 그리고 ripa 설치를 위해선, Rtools가 설치되어야 한다. (mac) m1칩을 사용하는 경우 (mac) homebrew 설치 및 libpng package 설치했음 "],["data-preprocessing.html", "repo 4 data preprocessing 4.1 DBI &amp; RSQLite", " repo 4 data preprocessing 4.1 DBI &amp; RSQLite RAM보다 큰 대용량데이터를 다루기 위해 DBI와 RSQLite 패키지를 사용한다. RSQLite는 R에서 SQLite DB를 사용할 수 있도록 하며, SQLite는 데이터베이스 전체를 파일 하나에 저장하기 때문에 백업과 이동이 간편하다. 참고한 웹페이지는 다음과 같다. - R에서 DB사용(Sqlite) 단, 전체 DB를 가지고 데이터 전처리를 진행하지 않는걸 추천한다. 일부 sample을 가지고 데이터 전처리를 수행한 후, 한 파일로 합치는 용도로 쓴다. 이때, DB에 대한 데이터 집계처리는 필요한 테이블을 추출하는 용도로만 사용한다. 예를 들어, case_when 등 function은 dbplyr로 잘 처리가 되지 않으며 오래걸린다. 특히, 메모리 문제로 오류가 발생할 가능성이 있다. 4.1.1 DB생성 DB의 생성은 다음과 같이 진행한다. dbConnect()함수를 활용해 연결한다. SQLite()는 드라이버의 이름을 의미한다. dbConnect(SQLite(), dbname = &#39;dbname&#39;) dbSendQuery를 사용하여 DB의 틀을 작성한다. dbSendQuery(con, &quot;CREATE TABLE E_db ( year TEXT, sido TEXT, gender TEXT, start_yr TEXT, start_mn TEXT)&quot;) dbListTables(con)로 테이블리스트를 확인한다. dbGetQuery(con, “SELECT * FROM E_db”) DB에 데이터를 다음과 같이 저장한다. dbWriteTable(con, name = “E_db”, value = db_3, row.names = F, append = T) value는 저장할 데이터를 의미한다. append=T일 경우 데이터를 아래로 붙인다. dbDisconnect(con)시 자동으로 저장된다. 4.1.2 dbplyr "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
